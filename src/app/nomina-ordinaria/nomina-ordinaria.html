<div class="nomina-container">
  <h2 class="titulo">Nómina ordinaria</h2>
  <div class="mat-elevation-z8" style="margin-top: 20px;">

    <div *ngIf="dataSource.data.length === 0" class="no-data-message">
      No hay datos para el año {{ anioSeleccionado }} y quincena
      {{ quincenaSeleccionada.toString().padStart(2, '0') }}
    </div>

    <table mat-table [dataSource]="dataSource">

      <!-- ID -->
      <ng-container matColumnDef="empleadoId">
        <th mat-header-cell *matHeaderCellDef>ID Empleado</th>
        <td mat-cell *matCellDef="let e">{{ e.empleadoId }}</td>
      </ng-container>

      <!-- Nombre -->
      <ng-container matColumnDef="nombreEmpleado">
        <th mat-header-cell *matHeaderCellDef>Nombre Empleado</th>
        <td mat-cell *matCellDef="let e">{{ e.nombreEmpleado }}</td>
      </ng-container>

      <!-- QNA -->
      <ng-container matColumnDef="qnaProceso">
        <th mat-header-cell *matHeaderCellDef>
            QNA
            <div class="qna-filters-row">
            <mat-form-field appearance="outline" class="qna-field">
                <mat-label>Quincena</mat-label>
                <mat-select [(ngModel)]="quincenaSeleccionada" (selectionChange)="onQuincenaChange()">
  <mat-option *ngFor="let q of quincenas" [value]="q">
    {{ q.toString().padStart(2,'0') }}
  </mat-option>
</mat-select>
            </mat-form-field>

            <mat-form-field appearance="outline" class="qna-field">
                <mat-label>Año</mat-label>
                <mat-select [(ngModel)]="anioSeleccionado" (selectionChange)="onAnioChange()">
                <mat-option *ngFor="let anio of anios" [value]="anio">
                    {{ anio }}
                </mat-option>
                </mat-select>
            </mat-form-field>

            <button mat-raised-button color="primary" (click)="calcularNomina()">
                Calcular
            </button>
            </div>
        </th>
        <td mat-cell *matCellDef="let e">{{ e.qnaProceso }}</td>
        </ng-container>

      <!-- Nivel -->
      <ng-container matColumnDef="nivelSueldo">
        <th mat-header-cell *matHeaderCellDef>Nivel Sueldo</th>
        <td mat-cell *matCellDef="let e">{{ e.nivelSueldo }}</td>
      </ng-container>

      <!-- Concepto -->
      <ng-container matColumnDef="concepto">
        <th mat-header-cell *matHeaderCellDef>Concepto</th>
        <td mat-cell *matCellDef="let e">{{ e.concepto }}</td>
      </ng-container>

      <!-- Tipo -->
      <ng-container matColumnDef="tipoConcepto">
        <th mat-header-cell *matHeaderCellDef>Tipo Concepto</th>
        <td mat-cell *matCellDef="let e">{{ e.tipoConcepto }}</td>
      </ng-container>

      <!-- Importe -->
      <ng-container matColumnDef="totalImporteQnal">
        <th mat-header-cell *matHeaderCellDef>Importe Total</th>
        <td mat-cell *matCellDef="let e">
          {{ e.totalImporteQnal | number:'1.2-2' }}
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

    </table>

    <mat-paginator
      [length]="totalElements"
      [pageSize]="100"
      showFirstLastButtons>
    </mat-paginator>

  </div>
</div>
